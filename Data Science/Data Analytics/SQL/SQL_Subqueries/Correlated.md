
<div class="track_article_contents__9JJFV"><h1 class="track_title__g20mM">Correlated Subquery</h1><hr><div class="track_body__GeGQu"><h2><span>Introduction to Correlated Subqueries in SQL</span></h2><p dir="ltr"><span>In the world of databases and SQL, subqueries are like the super detectives that help you find exactly the information you're looking for. One really smart type of subquery is called a "correlated subquery." It's like a query within a query and it's special because it's super flexible and can adapt to the context of what you're looking at. Think of it as a way to ask specific questions about your data based on what you're currently looking at. It's pretty neat because it helps you get targeted results, like a search tailored just for you. Let's dive deeper into to understand this.</span></p><h4><span>What is a Correlated Subquery?</span></h4><p dir="ltr"><span>A correlated subquery is a type of subquery that references one or more columns from the outer query. Unlike a non-correlated subquery, which operates independently, a correlated subquery relies on the data from the outer query to execute.</span></p><p dir="ltr"><span>The correlation between the inner and outer queries is established through a reference to a column in the outer query within the inner query's predicates. This enables the subquery to be re-evaluated for each row processed by the outer query, making it contextually adaptable.</span></p><h4><span>Structure of a Correlated Subquery</span></h4><p dir="ltr"><span>The basic structure of a correlated subquery involves embedding one query (inner query) within another query (outer query) and establishing a connection between them using a shared column or condition. Here's a general outline:</span></p><blockquote><p dir="ltr"><span>SELECT column1, column2, ...</span></p><p dir="ltr"><span>FROM table1</span></p><p dir="ltr"><span>WHERE condition_column = (</span></p><p dir="ltr"><span>    SELECT aggregate_function(column)</span></p><p dir="ltr"><span>    FROM table2</span></p><p dir="ltr"><span>    WHERE condition_column = table1.column</span></p><p><span>);</span></p></blockquote><p dir="ltr"><span>In this structure:</span></p><ul><li value="1"><span>The outer query retrieves data from '</span><b><strong>table1'</strong></b><span>.</span></li><li value="2"><span>The inner query is executed for each row in '</span><b><strong>table1'</strong></b><span>, utilizing the value from '</span><b><strong>table1.column'</strong></b><span> to filter data from '</span><b><strong>table2'</strong></b><span>.</span></li></ul><h2><span>Example</span></h2><p dir="ltr"><span>Consider a scenario where we have two tables: </span><b><strong>Employees </strong></b><span>and </span><b><strong>Salaries</strong></b><span>. We want to find employees whose salaries are higher than the average salary in their respective departments. Here's how a correlated subquery can accomplish this task:</span></p><p dir="ltr"><b><strong>Employees Table:</strong></b></p><table class="GFGEditorTheme__table"><colgroup><col><col><col></colgroup><tbody><tr><th class="GFGEditorTheme__tableCell GFGEditorTheme__tableCellHeader" style="width: 233.333px; border: 1px solid black; vertical-align: top; text-align: start; background-color: rgb(242, 243, 245);"><p dir="ltr"><span>Employee_ID</span></p></th><th class="GFGEditorTheme__tableCell GFGEditorTheme__tableCellHeader" style="width: 233.333px; border: 1px solid black; vertical-align: top; text-align: start; background-color: rgb(242, 243, 245);"><p dir="ltr"><span>Name</span></p></th><th class="GFGEditorTheme__tableCell GFGEditorTheme__tableCellHeader" style="width: 233.333px; border: 1px solid black; vertical-align: top; text-align: start; background-color: rgb(242, 243, 245);"><p dir="ltr"><span>Department</span></p></th></tr><tr><td class="GFGEditorTheme__tableCell" style="width: 233.333px; border: 1px solid black; vertical-align: top; text-align: start;"><p><span>1</span></p></td><td class="GFGEditorTheme__tableCell" style="width: 233.333px; border: 1px solid black; vertical-align: top; text-align: start;"><p dir="ltr"><span>Alice</span></p></td><td class="GFGEditorTheme__tableCell" style="width: 233.333px; border: 1px solid black; vertical-align: top; text-align: start;"><p dir="ltr"><span>Sales</span></p></td></tr><tr><td class="GFGEditorTheme__tableCell" style="width: 233.333px; border: 1px solid black; vertical-align: top; text-align: start;"><p><span>2</span></p></td><td class="GFGEditorTheme__tableCell" style="width: 233.333px; border: 1px solid black; vertical-align: top; text-align: start;"><p dir="ltr"><span>Bob</span></p></td><td class="GFGEditorTheme__tableCell" style="width: 233.333px; border: 1px solid black; vertical-align: top; text-align: start;"><p dir="ltr"><br></p></td></tr><tr><td class="GFGEditorTheme__tableCell" style="width: 233.333px; border: 1px solid black; vertical-align: top; text-align: start;"><p><span>3</span></p></td><td class="GFGEditorTheme__tableCell" style="width: 233.333px; border: 1px solid black; vertical-align: top; text-align: start;"><p dir="ltr"><span>Charlie</span></p></td><td class="GFGEditorTheme__tableCell" style="width: 233.333px; border: 1px solid black; vertical-align: top; text-align: start;"><p dir="ltr"><span>Sales</span></p></td></tr><tr><td class="GFGEditorTheme__tableCell" style="width: 233.333px; border: 1px solid black; vertical-align: top; text-align: start;"><p><span>4</span></p></td><td class="GFGEditorTheme__tableCell" style="width: 233.333px; border: 1px solid black; vertical-align: top; text-align: start;"><p dir="ltr"><span>David</span></p></td><td class="GFGEditorTheme__tableCell" style="width: 233.333px; border: 1px solid black; vertical-align: top; text-align: start;"><p dir="ltr"><br></p></td></tr></tbody></table><p dir="ltr"><b><strong>Salaries Table:</strong></b></p><table class="GFGEditorTheme__table"><colgroup><col><col></colgroup><tbody><tr><th class="GFGEditorTheme__tableCell GFGEditorTheme__tableCellHeader" style="width: 350px; border: 1px solid black; vertical-align: top; text-align: start; background-color: rgb(242, 243, 245);"><p dir="ltr"><span>Employee_ID</span></p></th><th class="GFGEditorTheme__tableCell GFGEditorTheme__tableCellHeader" style="width: 350px; border: 1px solid black; vertical-align: top; text-align: start; background-color: rgb(242, 243, 245);"><p dir="ltr"><span>Salary</span></p></th></tr><tr><td class="GFGEditorTheme__tableCell" style="width: 350px; border: 1px solid black; vertical-align: top; text-align: start;"><p><span>1</span></p></td><td class="GFGEditorTheme__tableCell" style="width: 350px; border: 1px solid black; vertical-align: top; text-align: start;"><p><span>50000</span></p></td></tr><tr><td class="GFGEditorTheme__tableCell" style="width: 350px; border: 1px solid black; vertical-align: top; text-align: start;"><p><span>2</span></p></td><td class="GFGEditorTheme__tableCell" style="width: 350px; border: 1px solid black; vertical-align: top; text-align: start;"><p><span>60000</span></p></td></tr><tr><td class="GFGEditorTheme__tableCell" style="width: 350px; border: 1px solid black; vertical-align: top; text-align: start;"><p><span>3</span></p></td><td class="GFGEditorTheme__tableCell" style="width: 350px; border: 1px solid black; vertical-align: top; text-align: start;"><p><span>48000</span></p></td></tr><tr><td class="GFGEditorTheme__tableCell" style="width: 350px; border: 1px solid black; vertical-align: top; text-align: start;"><p><span>4</span></p></td><td class="GFGEditorTheme__tableCell" style="width: 350px; border: 1px solid black; vertical-align: top; text-align: start;"><p><span>55000</span></p></td></tr></tbody></table><p dir="ltr"><span>Using a correlated subquery, the SQL query would look like:</span></p><blockquote><p dir="ltr"><span>SELECT Name, Department, Salary</span></p><p dir="ltr"><span>FROM Employees e</span></p><p dir="ltr"><span>WHERE Salary > (</span></p><p dir="ltr"><span>    SELECT AVG(Salary)</span></p><p dir="ltr"><span>    FROM Salaries s</span></p><p dir="ltr"><span>    WHERE e.Department = s.Department</span></p><p><span>);</span></p></blockquote><ul><li value="1"><span>The outer query </span><b><strong>(SELECT Name, Department, Salary FROM Employees e) </strong></b><span>retrieves data from the </span><b><strong>Employees</strong></b><span> table.</span></li><li value="2"><span>The inner query </span><b><strong>(SELECT AVG(Salary) FROM Salaries s WHERE e.Department = s.Department)</strong></b><span> calculates the average salary for each department in the </span><b><strong>Salaries </strong></b><span>table.</span></li><li value="3"><span>The correlation is established by comparing the </span><b><strong>Department </strong></b><span>column in both tables (</span><b><strong>e.Department = s.Department</strong></b><span>).</span><br></li></ul><p dir="ltr"><br><span>Correlated subqueries are a valuable tool in SQL, allowing for intricate data retrieval based on contextual relationships between queries. Understanding their structure and usage enables SQL developers to craft more sophisticated and targeted queries, efficiently extracting specific information from databases.</span></p><p dir="ltr"><br></p><p dir="ltr"><br></p><p dir="ltr"><br></p><p dir="ltr"><br></p><p dir="ltr"><br></p><p dir="ltr"><br></p></div><div class="track_mark_as_read_btn__qp09Q g-mt-5"><button class="ui green disabled button" disabled="" tabindex="-1">Marked as Read</button></div></div>
